<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTag Player Lookup</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
    <h1>Search for Player</h1>
    <input type="text" id="searchQuery" placeholder="Enter player ID or Name" />
    <button onclick="searchPlayer()">Search</button>

    <h2>Player Details</h2>
    <div id="playerDetails"></div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDKayWApP-GNh2v23trRVToSPXK85xVrDg",
            authDomain: "gtag-database.firebaseapp.com",
            projectId: "gtag-database",
            storageBucket: "gtag-database.firebasestorage.app",
            messagingSenderId: "858392947976",
            appId: "1:858392947976:web:1df12083cd4a8303b890bd",
            measurementId: "G-6BQD81LZG5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);  // Import the database instance

        // Function to upload player data
        function uploadPlayerData(playerId, playerName) {
            const playerRef = ref(database, 'players/' + playerId);  // Set reference to player data
            set(playerRef, {
                PlayerName: playerName,
                PlayerId: playerId,
                Timestamp: new Date().toISOString()
            }).then(() => {
                alert('Player data uploaded successfully!');
            }).catch((error) => {
                console.error("Error uploading player data: ", error);
            });
        }

        // Function to search for player data
        function searchPlayer() {
            const searchQuery = document.getElementById('searchQuery').value.trim();

            if (searchQuery) {
                const playerRef = ref(database, 'players/' + searchQuery);  // Fetch player data by ID
                get(playerRef).then((snapshot) => {
                    if (snapshot.exists()) {
                        const playerData = snapshot.val();
                        document.getElementById('playerDetails').innerHTML = `
                            <p><strong>Player Name:</strong> ${playerData.PlayerName}</p>
                            <p><strong>Player ID:</strong> ${playerData.PlayerId}</p>
                            <p><strong>Timestamp:</strong> ${playerData.Timestamp}</p>
                        `;
                    } else {
                        document.getElementById('playerDetails').innerHTML = `<p>No player found with ID or Name: ${searchQuery}</p>`;
                    }
                }).catch((error) => {
                    console.error("Error fetching player data: ", error);
                    document.getElementById('playerDetails').innerHTML = `<p>Error occurred while searching for player.</p>`;
                });
            } else {
                alert("Please enter a player ID or Name.");
            }
        }
    </script>
</body>
</html>
